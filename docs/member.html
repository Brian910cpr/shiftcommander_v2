<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ShiftCommander — Member Availability</title>

<style>
:root{
  --bg:#0b1020;
  --card:#111a33;
  --line:rgba(255,255,255,.12);
  --text:#eaf1ff;
  --muted:rgba(234,241,255,.55);

  --pref:#2bd27e;
  --avail:#5c8dff;
  --no:#ff5d5d;
  --clear:#2a3355;
}

*{box-sizing:border-box}
html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui}

header{
  position:sticky;top:0;z-index:10;
  background:linear-gradient(180deg,#050814,#050814cc);
  border-bottom:1px solid var(--line);
  padding:10px 14px;
  display:flex;gap:12px;align-items:center;flex-wrap:wrap;
}

header .pill{
  background:rgba(255,255,255,.06);
  border:1px solid var(--line);
  border-radius:999px;
  padding:6px 10px;
  font-size:13px;
  white-space:nowrap;
  flex-shrink:0;
}

header select{
  min-width:220px;
  font-size:14px;
}

.status{
  margin-left:auto;
  font-size:12px;
  color:var(--muted);
}

main{
  padding:12px;
}

/* MONTH LAYOUT */
.monthRow{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
  gap:12px;
  margin-bottom:12px;
}

.month{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:14px;
  padding:8px;
}

.month h3{
  margin:2px 0 6px;
  font-size:14px;
  font-weight:800;
  text-align:center;
}

.dow{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  font-size:10px;
  color:var(--muted);
  text-align:center;
  margin-bottom:4px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:4px;
  align-content:start;
}

/* DAY CELLS — HARD LOCKED */
/* === COMPACT DAY CELL: number beside pills === */

.day{
  height: 30px;              /* smaller cell */
  padding: 3px 4px;
  display: flex;
  flex-direction: row;       /* number beside pills */
  align-items: center;
  gap: 6px;
}


.day.blank{border:none;background:none}
.day.past{opacity:.35;pointer-events:none}



/* number is now a narrow left column */
.dayNum{
  width: 16px;
  text-align: right;
  font-size: 11px;
  font-weight: 800;
  line-height: 1;
  cursor: pointer;
}

/* bars become a tight right column */
.bars{
  margin-top: 0;             /* no bottom pinning needed now */
  display: flex;
  flex-direction: column;
  gap: 3px;
  align-items: flex-start;   /* keep pills consistent */
}

/* pills 150% bigger (6px -> 9px), and half-length */
/* Base bar */
.bar{
  height: 9px;
  width: 28px;
  border-radius: 6px;
  cursor: pointer;
  background: rgba(255,255,255,.18);   /* ← visible neutral */
  border: 1px solid rgba(255,255,255,.25);
}

/* Explicit states */
.bar.pref{
  background: var(--pref);
  border-color: var(--pref);
}

.bar.avail{
  background: var(--avail);
  border-color: var(--avail);
}

.bar.no{
  background: var(--no);
  border-color: var(--no);
}

</style>
</head>

<body>

<header>
  <div class="pill">Availability</div>

  <div class="pill">
    Member:
    <select id="member">
      <option>Lynnsey Benson</option>
      <option>Brian Ennis</option>
    </select>
  </div>

  <div class="status" id="status">Saved</div>
</header>

<main id="months"></main>

<script>
/* ===== CONFIG ===== */
const MONTHS_AHEAD = 6;
const STATES = ["clear","pref","avail","no"];
const today = new Date();

/* ===== STATE ===== */
const state = {}; // { dateISO: { am, pm } }

/* ===== HELPERS ===== */
const iso = d => d.toISOString().slice(0,10);
const cycle = s => STATES[(STATES.indexOf(s)+1)%STATES.length];
const isPast = isoDate => isoDate < iso(new Date());

function setStatus(msg){
  const el = document.getElementById("status");
  el.textContent = msg;
  setTimeout(()=>el.textContent="Saved",800);
}

/* ===== BUILD ===== */
function build(){
  const wrap = document.getElementById("months");
  wrap.innerHTML="";

  let row;
  for(let i=0;i<MONTHS_AHEAD;i++){
    if(i%2===0){
      row=document.createElement("div");
      row.className="monthRow";
      wrap.appendChild(row);
    }
    row.appendChild(buildMonth(i));
  }
}

function buildMonth(offset){
  const d = new Date(today.getFullYear(), today.getMonth()+offset,1);
  const m = d.getMonth(), y=d.getFullYear();
  const month = document.createElement("div");
  month.className="month";

  month.innerHTML = `
    <h3>${d.toLocaleString(undefined,{month:"long",year:"numeric"})}</h3>
    <div class="dow">${["S","M","T","W","T","F","S"].map(x=>`<div>${x}</div>`).join("")}</div>
    <div class="grid"></div>
  `;

  const grid = month.querySelector(".grid");
  const start = new Date(y,m,1).getDay();
  const days = new Date(y,m+1,0).getDate();

  for(let i=0;i<start;i++) grid.appendChild(blank());

  for(let day=1;day<=days;day++){
    const dateISO = iso(new Date(y,m,day));
    grid.appendChild(dayCell(dateISO,day));
  }

  return month;
}

function blank(){
  const d=document.createElement("div");
  d.className="day blank";
  return d;
}

function dayCell(dateISO,day){
  state[dateISO] ||= {am:"clear",pm:"clear"};

  const d=document.createElement("div");
  d.className="day";
  if(isPast(dateISO)) d.classList.add("past");

  const num=document.createElement("div");
  num.className="dayNum";
  num.textContent=day;
  num.onclick=()=>{
    const next = cycle(state[dateISO].am);
    state[dateISO].am = next;
    state[dateISO].pm = next;
    render();
  };

  const bars=document.createElement("div");
  bars.className="bars";

  const am=bar(()=>{state[dateISO].am=cycle(state[dateISO].am);render();});
  const pm=bar(()=>{state[dateISO].pm=cycle(state[dateISO].pm);render();});

  bars.append(am,pm);
  d.append(num,bars);

  function render(){
    am.className=`bar ${state[dateISO].am}`;
    pm.className=`bar ${state[dateISO].pm}`;
    setStatus("Saving…");
  }
  render();
  return d;
}

function bar(fn){
  const b=document.createElement("div");
  b.className="bar";
  b.onclick=fn;
  return b;
}

build();
</script>

</body>
</html>
